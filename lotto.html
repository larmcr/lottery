<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Lotto</title>
  <meta name="description" content="JPS lotto">
  <link rel="shortcut icon" href="https://picocss.com/favicon.ico">
  <!-- <link rel="canonical" href="https://picocss.com/examples/classless/"> -->

  <!-- Pico.css (Classless version) -->
  <link rel="stylesheet" href="https://unpkg.com/@picocss/pico@latest/css/pico.classless.min.css">
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jstat@latest/dist/jstat.min.js"></script>
  <script>
    function normalQuantile(r,t,o){var n,e,a;return o<0?-1:0==o?t:(n=r-.5,.075<=r&&r<=.925?(e=.180625-n*n,a=n*(((((((2509.0809287301227*e+33430.57558358813)*e+67265.7709270087)*e+45921.95393154987)*e+13731.69376550946)*e+1971.5909503065513)*e+133.14166789178438)*e+3.3871328727963665)/(((((((5226.495278852854*e+28729.085735721943)*e+39307.89580009271)*e+21213.794301586597)*e+5394.196021424751)*e+687.1870074920579)*e+42.31333070160091)*e+1)):(e=n>0?1-r:r,e=Math.sqrt(-Math.log(e)),e<=5?(e+=-1.6,a=(((((((.0007745450142783414*e+.022723844989269184)*e+.2417807251774506)*e+1.2704582524523684)*e+3.6478483247632045)*e+5.769497221460691)*e+4.630337846156546)*e+1.4234371107496835)/(((((((1.0507500716444169e-9*e+.0005475938084995345)*e+.015198666563616457)*e+.14810397642748008)*e+.6897673349851)*e+1.6763848301838038)*e+2.053191626637759)*e+1)):(e+=-5,a=(((((((2.0103343992922881e-7*e+27115555687434876e-21)*e+.0012426609473880784)*e+.026532189526576124)*e+.29656057182850487)*e+1.7848265399172913)*e+5.463784911164114)*e+6.657904643501103)/(((((((2.0442631033899397e-15*e+1.421511758316446e-7)*e+18463183175100548e-21)*e+.0007868691311456133)*e+.014875361290850615)*e+.1369298809227358)*e+.599832206555888)*e+1)),n<0&&(a=-a)),t+o*a)}function sign(r){return 0==r?0:r>0?1:-1}function ShapiroWilkW(r){function t(r,t,o){var n,a;if(a=r[0],t>1){for(n=o*r[t-1],e=t-2;e>0;e--)n=(n+r[e])*o;a+=n}return a}r=r.sort(function(r,t){return r-t});var o=r.length;if(!(o<3)){var n,e,a,i,l,s,f,h,M,u,g,c,v,q,m,x,p,b,Q,W,d,k,w,y,A,S=Math.floor(o/2),j=new Array(Math.floor(S)+1),z=1e-19,B=[-2.273,.459],C=[0,.221157,-.147981,-2.07119,4.434685,-2.706056],D=[0,.042981,-.293762,-1.752461,5.682633,-3.582633],E=[.544,-.39978,.025054,-6714e-7],F=[1.3822,-.77857,.062767,-.0020322],G=[-1.5861,-.31082,-.083751,.0038915],H=[-.4803,-.082676,.0030302],I=1;if(g=o,3==o)j[1]=.70710678;else{for(W=g+.25,l=0,n=1;n<=S;n++){j[n]=normalQuantile((n-.375)/W,0,1);var J=j[n];l+=J*J}for(l*=2,s=Math.sqrt(l),w=1/Math.sqrt(g),M=t(C,6,w)-j[1]/s,o>5?(a=3,u=-j[2]/s+t(D,6,w),b=Math.sqrt((l-j[1]*j[1]*2-j[2]*j[2]*2)/(1-M*M*2-u*u*2)),j[2]=u):(a=2,b=Math.sqrt((l-j[1]*j[1]*2)/(1-M*M*2))),j[1]=M,n=a;n<=S;n++)j[n]/=-b}if(h=r[o-1]-r[0],h<z)console.log("range is too small!");else{for(m=r[0]/h,q=m,c=-j[1],n=1,e=o-1;n<o;e--){if(v=r[n]/h,m-v>z)return void console.log("xx - xi is too big.",m-v);q+=v,n++,n!=e&&(c+=sign(n-e)*j[Math.min(n,e)]),m=v}if(!(o>5e3)){for(c/=o,q/=o,d=y=k=0,n=0,e=o-1;n<o;n++,e--)Q=n!=e?sign(n-e)*j[1+Math.min(n,e)]-c:-c,A=r[n]/h-q,d+=Q*Q,y+=A*A,k+=Q*A;i=Math.sqrt(d*y),p=(i-k)*(i+k)/(d*y);var K=1-p;if(3==o){var L=1.90985931710274,N=1.0471975511966;return I=L*(asin(sqrt(K))-N),I<0&&(I=0),K}if(x=Math.log(p),m=Math.log(g),o<=11){if(f=t(B,2,g),x>=f)return I=1e-99,K;x=-Math.log(f-x),t(E,4,g),Math.exp(t(F,4,g))}else t(G,4,m),Math.exp(t(H,3,m));return K}console.log("n is too big!")}}}  
  </script>
  <script>
    var PI = Math.PI
  , PID2 = PI / 2
  , delta5 = 1e-15
  , max_n = 1e3;
  function EXP(e) {
    return Math.exp(e)
}
  function chi_distribution(e, t) {
    if (max_n < e | max_n < t) {
        var r = normal_distribution_2t((POWER(e / t, 1 / 3) + 2 / (9 * t) - 1) / SQRT(2 / (9 * t))) / 2;
        return t < e ? r : 1 - r
    }
    var n = EXP(-.5 * e);
    t % 2 == 1 && (n *= SQRT(2 * e / PI));
    for (var o = t; 2 <= o; )
        n = n * e / o,
        o -= 2;
    for (var a = n, i = t; delta5 * n < a; )
        n += a = a * e / (i += 2);
    return 1 - n
}
    function inv_chi_distribution(e, t) {
    for (var r = .5, n = .5, o = 0; delta5 < n; )
        n /= 2,
        chi_distribution(o = 1 / r - 1, t) > e ? r -= n : r += n;
    return o
}
    function SQRT(e) {
    return Math.sqrt(e)
}
    function inv_normal_distribution(e) {
    return 0 == e ? .5 : .5 < e ? SQRT(inv_chi_distribution(2 * (1 - e), 1)) : -SQRT(inv_chi_distribution(2 * e, 1))
}
    function InvDistribution(e, t, r) {
    var n, o = r, a = 0, i = 0;
    if ("Normal" == e)
        return jStat.normal.inv(t, o.mean, o.std);
    if ("T" == e)
        return jStat.studentt.inv(t, o.df);
    if ("Chi-Square" == e)
        return jStat.chisquare.inv(t, o.df);
    if ("F" == e)
        return (n = jStat.centralF.inv(t, o.df1, o.df2)) || (n = inv_f_approx(t, r)),
        n;
    if ("weibull" == e)
        return jStat.weibull.inv(t, o.scale, o.shape);
    if ("exponential" == e)
        return jStat.exponential.inv(t, o.rate);
    if ("beta" == e)
        return jStat.beta.inv(t, o.alpha, o.beta);
    if ("spr" == e)
        return inv_f_spr(1 - t, o.n);
    if ("binomial" != e && "poisson" != e)
        return "kolmogorov" == e ? inv_distribution(t, r, {
            fun: ks_distribution
        }, 0, 1) : "lilliefors" == e ? inv_distribution(t, r, {
            fun: lili_distribution
        }, 0, 1) : void debug.error("Distribution type: " + e + " doesn't exist.");
    for (; i < t; )
        i += pdf(e, a, r),
        a += 1;
    return a - 1
}
    function SW_a2(e) {
    var t = Math.round(e / 2 - .1);
    var r, n = [], o = [], a = 0, i = 1;
    for (r = 1; r <= e; r++) {
        var l = InvDistribution("Normal", (r - .375) / ((i = 1) * e + .25), {
            mean: 0,
            std: 1
        });
        o.push(l),
        a += Math.pow(l, 2)
    }
    var s = 1 / Math.pow(e, .5)
      , u = -2.706056 * Math.pow(s, 5) + 4.434685 * Math.pow(s, 4) - 2.07119 * Math.pow(s, 3) - .147981 * Math.pow(s, 2) + .221157 * s + o[e - i] * Math.pow(a, -.5)
      , c = -3.582633 * Math.pow(s, 5) + 5.682633 * Math.pow(s, 4) - 1.752461 * Math.pow(s, 3) - .293762 * Math.pow(s, 2) + .042981 * s + o[e - 1 - i] * Math.pow(a, -.5)
      , d = (a - 2 * Math.pow(o[e - i], 2) - 2 * Math.pow(o[e - 1 - i], 2)) / (1 - 2 * Math.pow(u, 2) - 2 * Math.pow(c, 2))
      , f = Math.sqrt(d);
    for (n[1 - i] = u,
    n[2 - i] = c,
    r = 3; r < t + 1; r++)
        n[r - i] = -o[r - i] / f;
    return n
}
    function SW_a(e) {
    return e <= 50 ? SW_a1(e) : e <= 5e3 ? SW_a2(e) : void alert("maximum 5000 values")
}
    function max1(e) {
    return e.reduce(function(e, t) {
        return Math.max(1 * e, 1 * t)
    })
}
    function min1(e) {
    return e.reduce(function(e, t) {
        return Math.min(1 * e, 1 * t)
    })
}
    function xround(e, t) {
    if (void 0 === t && (t = 6),
    "string" == typeof t && (t = Number(t)),
    "infinite" == e)
        return "&infin;";
    if ("ninfinite" == e)
        return "-&infin;";
    var r = Math.log10(1 * Math.abs(e));
    10 < (r = r < 0 ? t : Math.round(r + .5) + t) && (r = 10);
    var n = (1 * e).toPrecision(r);
    return "NaN" == (n = (1 * n).toString()) && (n = e),
    n
}
    function sum1(e) {
    return e.reduce(function(e, t) {
        return 1 * e + 1 * t
    })
}
    function measures(e) {
    var t, r, n, o, a, i, l, s, u, c, d = 0, f = 0, h = 0, m = [], p = [];
    n = (t = sum1(e)) / (r = e.length);
    for (var b = 0; b < r; b++)
        residual1 = e[b] - n,
        c = e[b] + " - " + xround(n, 3),
        m.push(residual1),
        p.push([e[b], c, residual1]),
        d += Math.pow(residual1, 2),
        f += Math.pow(e[b] - n, 3),
        h += Math.pow(e[b] - n, 4);
    return i = 1 < r ? d / (r - 1) : 0,
    l = d / r,
    o = Math.sqrt(i),
    a = Math.sqrt(l),
    s = Math.sqrt(r * (r - 1)) * f / (r * (r - 2) * Math.pow(a, 3)),
    u = r * (r + 1) * (r - 1) * h / ((r - 2) * (r - 3) * Math.pow(d, 2)) - 3 * Math.pow(r - 1, 2) / ((r - 2) * (r - 3)),
    {
        sum: t,
        min: min1(e),
        max: max1(e),
        n: r,
        average: n,
        ss: d,
        s: o,
        sigma: a,
        sample_variance: i,
        variance: l,
        residual_table: p,
        residual: m,
        skewness: s,
        kurtosis: u,
    }
}
    function sw_test(e, t) {
    var r = [...e];
    r = r.sort(function(e, t) {
        return e - t
    });
    for (var n = 0; n < r.length && Number(r[n]) <= 0; n++)
        0 == r[n].length && (r.splice(n, 1),
        n--);
    var o = measures(r)
      , a = o.ss
      , i = o.n;
    if (i <= 5e3) {
        var l = 0
          , s = Math.round(i / 2 - .1)
          , u = SW_a(i);
        for (n = 0; n < s; n++) {
            l += (r[i - n - 1] - r[n]) * u[n]
        }
        var c = Math.pow(l, 2) / a
          , d = .0038915 * Math.pow(Math.log(i), 3) - .083751 * Math.pow(Math.log(i), 2) - .31082 * Math.log(i) - 1.5861
          , f = Math.exp(.0030302 * Math.pow(Math.log(i), 2) - .082676 * Math.log(i) - .4803)
          , h = (Math.log(1 - c) - d) / f
          , m = 1 - jStat.normal.cdf(h, 0, 1)
          , p = inv_normal_distribution(1 - t);
        return {
            w: c,
            b: l,
            statistic: h,
            pvalue: m,
            cval1: -1 / 0,
            cval2: p,
            range1: 1 - Math.exp(f * p + d),
            range2: 1,
            n: r.length,
            ms: o
        }
    }
}
  </script>
</head>

<body>

  <!-- Header -->
  <header>
    <hgroup>
      <h1>JPS Lotto</h1>
      <h2>Get all Lotto info</h2>
    </hgroup>
    <nav>
      <ul>
        <li>Theme:</li>
        <li><a href="#" data-theme-switcher="auto">Auto</a></li>
        <li><a href="#" data-theme-switcher="light">Light</a></li>
        <li><a href="#" data-theme-switcher="dark">Dark</a></li>
      </ul>
    </nav>
  </header>
  <!-- ./ Header -->

  <main>
    <!-- Tables -->
    <section id="tables">
      <h2>Tables</h2>
      <figure>
        <table role="grid">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">Heading</th>
              <th scope="col">Heading</th>
              <th scope="col">Heading</th>
              <th scope="col">Heading</th>
              <th scope="col">Heading</th>
              <th scope="col">Heading</th>
              <th scope="col">Heading</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th scope="row">1</th>
              <td>Cell</td>
              <td>Cell</td>
              <td>Cell</td>
              <td>Cell</td>
              <td>Cell</td>
              <td>Cell</td>
              <td>Cell</td>
            </tr>
            <tr>
              <th scope="row">2</th>
              <td>Cell</td>
              <td>Cell</td>
              <td>Cell</td>
              <td>Cell</td>
              <td>Cell</td>
              <td>Cell</td>
              <td>Cell</td>
            </tr>
            <tr>
              <th scope="row">3</th>
              <td>Cell</td>
              <td>Cell</td>
              <td>Cell</td>
              <td>Cell</td>
              <td>Cell</td>
              <td>Cell</td>
              <td>Cell</td>
            </tr>
          </tbody>
        </table>
      </figure>
    </section>
    <!-- ./ Tables -->

    <!-- Accordions -->
    <section id="accordions">
      <h2>Plots</h2>
      <details open>
        <summary>Box</summary>
        <div id="box"></div>
      </details>
      <details open>
        <summary>Histogram</summary>
        <div id="histogram"></div>
      </details>
    </section>
    <!-- ./ Accordions -->

    <!-- Article-->
    <article id="article">
      <h2>Article</h2>
      <p>Nullam dui arcu, malesuada et sodales eu, efficitur vitae dolor. Sed ultricies dolor non ante vulputate
        hendrerit. Vivamus sit amet suscipit sapien. Nulla iaculis eros a elit pharetra egestas. Nunc placerat facilisis
        cursus. Sed vestibulum metus eget dolor pharetra rutrum.</p>
      <footer><small>Duis nec elit placerat, suscipit nibh quis, finibus neque.</small></footer>
    </article><!-- ./ Article-->
  </main>
  <!-- ./ Main -->

  <!-- Minimal theme switcher -->
  <script async>
    const themeSwitcher = {
      // Config
      buttonsTarget: 'a[data-theme-switcher]',
      buttonAttribute: 'data-theme-switcher',
      rootAttribute: 'data-theme',

      // Init
      init() {
        document.querySelectorAll(this.buttonsTarget).forEach(function (button) {
          button.addEventListener('click', function (event) {
            event.preventDefault();
            document.querySelector('html').setAttribute(this.rootAttribute, event.target.getAttribute(this.buttonAttribute));
        }.bind(this), false)}.bind(this));
      },
    };
    // Init
    themeSwitcher.init();
  </script>

  <script defer>
    (async () => {
      try {
        const response = await fetch('./lotto.json');
        const json = await response.json();
        let obj = {
          lists: { numbers: [], sums: [] },
          games: [],
          numbers: {},
          sums: {},
          tops: {},
        };
        Object.keys(json).forEach((game, index) => {
          obj.lists.numbers = obj.lists.numbers.concat(json[game].n, json[game].r);
          obj.games.push({
            game: Number(game),
            nums: json[game].n.sort((a, b) => a - b),
            sum: json[game].n.reduce((a, b) => a + b),
            type: 'n',
          }, {
            game: Number(game),
            nums: json[game].r.sort((a, b) => a - b),
            sum: json[game].r.reduce((a, b) => a + b),
            type: 'r',
          });
          obj.lists.sums.push(obj.games[index * 2].sum, obj.games[index * 2 + 1].sum);
          json[game].n.forEach((num) => {
            if (!obj.numbers[num]) {
              obj.numbers[num] = { count: 0 };
            }
            obj.numbers[num].count++;
          });
          json[game].r.forEach((num) => {
            if (!obj.numbers[num]) {
              obj.numbers[num] = { count: 0 };
            }
            obj.numbers[num].count++;
          });
        });
        obj.lists.numbers = obj.lists.numbers.sort((a, b) => a - b);
        const sums = obj.lists.sums;
        const [q1, median, q3] = jStat.quartiles(sums);
        obj.sums.q1 = q1;
        obj.sums.median = median;
        obj.sums.q3 = q3;
        obj.sums.sw = ShapiroWilkW(sums);
        obj.sums.min = jStat.min(sums);
        obj.sums.max = jStat.max(sums);
        const count = obj.lists.numbers.length;
        let toOrder = {};
        Object.keys(obj.numbers).forEach((num) => {
          obj.numbers[num].perc = Math.round(obj.numbers[num].count / count * 10000) / 100;
          toOrder[num] = obj.numbers[num].count;
        });
        obj.lists.order = Object.entries(toOrder).sort((a, b) => b[1] - a[1]).map((ent) => Number(ent[0]));
        const max = obj.games[0].nums.length;
        const pivot = Math.floor(obj.lists.order.length / 2);
        obj.tops.all = obj.lists.order.slice(0, max);
        obj.tops.even = obj.lists.order.filter((num) => num % 2 === 0).slice(0, max);
        obj.tops.odd = obj.lists.order.filter((num) => num % 2 !== 0).slice(0, max);
        obj.tops.low = obj.lists.order.filter((num) => num < pivot).slice(0, max);
        obj.tops.high = obj.lists.order.filter((num) => num >= pivot).slice(0, max);

        for (let count = 0; count < max; ++count) {
          const index = (count + 1) * -1;
          obj.games.at(index).outs = [-1, -1, -1, -1, -1];
          obj.games.at(index).nums.forEach((num, ind) => {
            let found = false;
            let i = index - 1;
            for (; !found; --i) {
              for (let j = 0; !found && j < 5; ++j) {
                found = obj.games.at(i).nums[j] === num;
              }
            }
            obj.games.at(index).outs[ind] = i * -1 + index - 2;
          });
        }

        console.info(obj);
        const x = obj.lists.sums;
        // console.info(x.join(','));
        console.info(sw_test(x, "0.05"));
        // Plotly.newPlot(document.getElementById('box'), [{ x, type: 'box', name: 'Sums' }]);
        // Plotly.newPlot(document.getElementById('histogram'), [{ x, type: 'histogram', histnorm: 'probability', name: 'Sums' }]);
      } catch (err) {
        console.info('ERROR ->', err);
      }
    })();
  </script>
</body>

</html>
