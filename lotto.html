<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Lotto</title>
  <meta name="description" content="JPS lotto">
  <link rel="shortcut icon" href="https://picocss.com/favicon.ico">
  <!-- <link rel="canonical" href="https://picocss.com/examples/classless/"> -->

  <!-- Pico.css (Classless version) -->
  <link rel="stylesheet" href="https://unpkg.com/@picocss/pico@latest/css/pico.classless.min.css">
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jstat@latest/dist/jstat.min.js"></script>
  <script>
    function EXP(t){return Math.exp(t)}function chi_distribution(t,r){if(max_n<t|max_n<r){var n=normal_distribution_2t((POWER(t/r,1/3)+2/(9*r)-1)/SQRT(2/(9*r)))/2;return r<t?n:1-n}var i=EXP(-.5*t);r%2==1&&(i*=SQRT(2*t/PI));for(var a=r;2<=a;)i=i*t/a,a-=2;for(var o=i,e=r;delta5*i<o;)i+=o=o*t/(e+=2);return 1-i}function inv_chi_distribution(t,r){for(var n=.5,i=.5,a=0;delta5<i;)i/=2,chi_distribution(a=1/n-1,r)>t?n-=i:n+=i;return a}function SQRT(t){return Math.sqrt(t)}function inv_normal_distribution(t){return 0==t?.5:.5<t?SQRT(inv_chi_distribution(2*(1-t),1)):-SQRT(inv_chi_distribution(2*t,1))}function InvDistribution(t,r,n){var i,a=n,o=0,e=0;if("Normal"==t)return jStat.normal.inv(r,a.mean,a.std);if("T"==t)return jStat.studentt.inv(r,a.df);if("Chi-Square"==t)return jStat.chisquare.inv(r,a.df);if("F"==t)return(i=jStat.centralF.inv(r,a.df1,a.df2))||(i=inv_f_approx(r,n)),i;if("weibull"==t)return jStat.weibull.inv(r,a.scale,a.shape);if("exponential"==t)return jStat.exponential.inv(r,a.rate);if("beta"==t)return jStat.beta.inv(r,a.alpha,a.beta);if("spr"==t)return inv_f_spr(1-r,a.n);if("binomial"!=t&&"poisson"!=t)return"kolmogorov"==t?inv_distribution(r,n,{fun:ks_distribution},0,1):"lilliefors"==t?inv_distribution(r,n,{fun:lili_distribution},0,1):void debug.error("Distribution type: "+t+" doesn't exist.");for(;e<r;)e+=pdf(t,o,n),o+=1;return o-1}function SW_a2(t){var r,n=Math.round(t/2-.1),i=[],a=[],o=0,e=1;for(r=1;r<=t;r++){var u=InvDistribution("Normal",(r-.375)/((e=1)*t+.25),{mean:0,std:1});a.push(u),o+=Math.pow(u,2)}var s=1/Math.pow(t,.5),h=-2.706056*Math.pow(s,5)+4.434685*Math.pow(s,4)-2.07119*Math.pow(s,3)-.147981*Math.pow(s,2)+.221157*s+a[t-e]*Math.pow(o,-.5),f=-3.582633*Math.pow(s,5)+5.682633*Math.pow(s,4)-1.752461*Math.pow(s,3)-.293762*Math.pow(s,2)+.042981*s+a[t-1-e]*Math.pow(o,-.5),l=(o-2*Math.pow(a[t-e],2)-2*Math.pow(a[t-1-e],2))/(1-2*Math.pow(h,2)-2*Math.pow(f,2)),v=Math.sqrt(l);for(i[1-e]=h,i[2-e]=f,r=3;r<n+1;r++)i[r-e]=-a[r-e]/v;return i}function SW_a(t){return t<=50?SW_a1(t):t<=5e3?SW_a2(t):void alert("maximum 5000 values")}function max1(t){return t.reduce(function(t,r){return Math.max(1*t,1*r)})}function min1(t){return t.reduce(function(t,r){return Math.min(1*t,1*r)})}function xround(t,r){if(void 0===r&&(r=6),"string"==typeof r&&(r=Number(r)),"infinite"==t)return"&infin;";if("ninfinite"==t)return"-&infin;";var n=Math.log10(1*Math.abs(t));10<(n=n<0?r:Math.round(n+.5)+r)&&(n=10);var i=(1*t).toPrecision(n);return"NaN"==(i=(1*i).toString())&&(i=t),i}function sum1(t){return t.reduce(function(t,r){return 1*t+1*r})}function measures(t){var r,n,i,a,o,e,u,s,h,f,l=0,v=0,M=0,p=[],d=[];i=(r=sum1(t))/(n=t.length);for(var c=0;c<n;c++)residual1=t[c]-i,f=t[c]+" - "+xround(i,3),p.push(residual1),d.push([t[c],f,residual1]),l+=Math.pow(residual1,2),v+=Math.pow(t[c]-i,3),M+=Math.pow(t[c]-i,4);return e=1<n?l/(n-1):0,u=l/n,a=Math.sqrt(e),o=Math.sqrt(u),s=Math.sqrt(n*(n-1))*v/(n*(n-2)*Math.pow(o,3)),h=n*(n+1)*(n-1)*M/((n-2)*(n-3)*Math.pow(l,2))-3*Math.pow(n-1,2)/((n-2)*(n-3)),{sum:r,min:min1(t),max:max1(t),n:n,average:i,ss:l,s:a,sigma:o,sample_variance:e,variance:u,residual_table:d,residual:p,skewness:s,kurtosis:h}}function sw_test(t,r){var n=[...t];n=n.sort(function(t,r){return t-r});for(var i=0;i<n.length&&Number(n[i])<=0;i++)0==n[i].length&&(n.splice(i,1),i--);var a=measures(n),o=a.ss,e=a.n;if(e<=5e3){var u=0,s=Math.round(e/2-.1),h=SW_a(e);for(i=0;i<s;i++)u+=(n[e-i-1]-n[i])*h[i];var f=Math.pow(u,2)/o,l=.0038915*Math.pow(Math.log(e),3)-.083751*Math.pow(Math.log(e),2)-.31082*Math.log(e)-1.5861,v=Math.exp(.0030302*Math.pow(Math.log(e),2)-.082676*Math.log(e)-.4803),M=(Math.log(1-f)-l)/v,p=1-jStat.normal.cdf(M,0,1),d=inv_normal_distribution(1-r);return{w:f,b:u,statistic:M,pvalue:p,cval1:-1/0,cval2:d,range1:1-Math.exp(v*d+l),range2:1,n:n.length,ms:a}}}var PI=Math.PI,PID2=PI/2,delta5=1e-15,max_n=1e3;
  </script>
</head>

<body>

  <!-- Header -->
  <header>
    <hgroup>
      <h1>JPS Lotto</h1>
      <h2>Get all Lotto info</h2>
    </hgroup>
    <nav>
      <ul>
        <li>Theme:</li>
        <li><a href="#" data-theme-switcher="auto">Auto</a></li>
        <li><a href="#" data-theme-switcher="light">Light</a></li>
        <li><a href="#" data-theme-switcher="dark">Dark</a></li>
      </ul>
    </nav>
  </header>
  <!-- ./ Header -->

  <main>
    <!-- Tables -->
    <section id="tables">
      <h2>Tables</h2>
      <figure>
        <table role="grid">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">Heading</th>
              <th scope="col">Heading</th>
              <th scope="col">Heading</th>
              <th scope="col">Heading</th>
              <th scope="col">Heading</th>
              <th scope="col">Heading</th>
              <th scope="col">Heading</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th scope="row">1</th>
              <td>Cell</td>
              <td>Cell</td>
              <td>Cell</td>
              <td>Cell</td>
              <td>Cell</td>
              <td>Cell</td>
              <td>Cell</td>
            </tr>
            <tr>
              <th scope="row">2</th>
              <td>Cell</td>
              <td>Cell</td>
              <td>Cell</td>
              <td>Cell</td>
              <td>Cell</td>
              <td>Cell</td>
              <td>Cell</td>
            </tr>
            <tr>
              <th scope="row">3</th>
              <td>Cell</td>
              <td>Cell</td>
              <td>Cell</td>
              <td>Cell</td>
              <td>Cell</td>
              <td>Cell</td>
              <td>Cell</td>
            </tr>
          </tbody>
        </table>
      </figure>
    </section>
    <!-- ./ Tables -->

    <!-- Accordions -->
    <section id="accordions">
      <h2>Plots</h2>
      <details open>
        <summary>Box</summary>
        <div id="box"></div>
      </details>
      <details open>
        <summary>Histogram</summary>
        <div id="histogram"></div>
      </details>
    </section>
    <!-- ./ Accordions -->

    <!-- Article-->
    <article id="article">
      <h2>Article</h2>
      <p>Nullam dui arcu, malesuada et sodales eu, efficitur vitae dolor. Sed ultricies dolor non ante vulputate
        hendrerit. Vivamus sit amet suscipit sapien. Nulla iaculis eros a elit pharetra egestas. Nunc placerat facilisis
        cursus. Sed vestibulum metus eget dolor pharetra rutrum.</p>
      <footer><small>Duis nec elit placerat, suscipit nibh quis, finibus neque.</small></footer>
    </article><!-- ./ Article-->
  </main>
  <!-- ./ Main -->

  <!-- Minimal theme switcher -->
  <script async>
    const themeSwitcher = {
      // Config
      buttonsTarget: 'a[data-theme-switcher]',
      buttonAttribute: 'data-theme-switcher',
      rootAttribute: 'data-theme',

      // Init
      init() {
        document.querySelectorAll(this.buttonsTarget).forEach(function (button) {
          button.addEventListener('click', function (event) {
            event.preventDefault();
            document.querySelector('html').setAttribute(this.rootAttribute, event.target.getAttribute(this.buttonAttribute));
        }.bind(this), false)}.bind(this));
      },
    };
    // Init
    themeSwitcher.init();
  </script>

  <script defer>
    (async () => {
      try {
        const response = await fetch('./lotto.json');
        const json = await response.json();
        let obj = {
          lists: { numbers: [], sums: [] },
          games: [],
          numbers: {},
          sums: {},
          tops: {},
        };
        Object.keys(json).forEach((game, index) => {
          obj.lists.numbers = obj.lists.numbers.concat(json[game].n, json[game].r);
          obj.games.push({
            game: Number(game),
            nums: json[game].n.sort((a, b) => a - b),
            sum: json[game].n.reduce((a, b) => a + b),
            type: 'n',
          }, {
            game: Number(game),
            nums: json[game].r.sort((a, b) => a - b),
            sum: json[game].r.reduce((a, b) => a + b),
            type: 'r',
          });
          obj.lists.sums.push(obj.games[index * 2].sum, obj.games[index * 2 + 1].sum);
          json[game].n.forEach((num) => {
            if (!obj.numbers[num]) {
              obj.numbers[num] = { count: 0 };
            }
            obj.numbers[num].count++;
          });
          json[game].r.forEach((num) => {
            if (!obj.numbers[num]) {
              obj.numbers[num] = { count: 0 };
            }
            obj.numbers[num].count++;
          });
        });
        obj.lists.numbers = obj.lists.numbers.sort((a, b) => a - b);
        const sums = obj.lists.sums;
        const [q1, median, q3] = jStat.quartiles(sums);
        obj.sums.q1 = q1;
        obj.sums.median = median;
        obj.sums.q3 = q3;
        obj.sums.sw = sw_test(sums, "0.05");
        obj.sums.min = jStat.min(sums);
        obj.sums.max = jStat.max(sums);
        const count = obj.lists.numbers.length;
        let toOrder = {};
        Object.keys(obj.numbers).forEach((num) => {
          obj.numbers[num].perc = Math.round(obj.numbers[num].count / count * 10000) / 100;
          toOrder[num] = obj.numbers[num].count;
        });
        obj.lists.order = Object.entries(toOrder).sort((a, b) => b[1] - a[1]).map((ent) => Number(ent[0]));
        const max = obj.games[0].nums.length;
        const pivot = Math.floor(obj.lists.order.length / 2);
        obj.tops.all = obj.lists.order.slice(0, max);
        obj.tops.even = obj.lists.order.filter((num) => num % 2 === 0).slice(0, max);
        obj.tops.odd = obj.lists.order.filter((num) => num % 2 !== 0).slice(0, max);
        obj.tops.low = obj.lists.order.filter((num) => num < pivot).slice(0, max);
        obj.tops.high = obj.lists.order.filter((num) => num >= pivot).slice(0, max);

        for (let count = 0; count < max; ++count) {
          const index = (count + 1) * -1;
          obj.games.at(index).outs = [-1, -1, -1, -1, -1];
          obj.games.at(index).nums.forEach((num, ind) => {
            let found = false;
            let i = index - 1;
            for (; !found; --i) {
              for (let j = 0; !found && j < 5; ++j) {
                found = obj.games.at(i).nums[j] === num;
              }
            }
            obj.games.at(index).outs[ind] = i * -1 + index - 2;
          });
        }

        console.info(obj);
        const x = obj.lists.sums;
        // console.info(x.join(','));
        // Plotly.newPlot(document.getElementById('box'), [{ x, type: 'box', name: 'Sums' }]);
        // Plotly.newPlot(document.getElementById('histogram'), [{ x, type: 'histogram', histnorm: 'probability', name: 'Sums' }]);
      } catch (err) {
        console.info('ERROR ->', err);
      }
    })();
  </script>
</body>

</html>
